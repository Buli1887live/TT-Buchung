<!doctype html>
<!-- Honeypot gegen Spam -->
<div class="sr-only" aria-hidden="true">
<label for="website">Website</label>
<input id="website" name="website" type="text" tabindex="-1" autocomplete="off" />
</div>

<div class="actions">
<button type="submit">Absenden</button>
<button type="reset">Zurücksetzen</button>
</div>

<div id="ok" class="alert ok">Danke! Deine Buchung wurde übermittelt.</div>
<div id="err" class="alert err">Fehler bei der Übertragung. Bitte später erneut versuchen.</div>

<p class="muted">Hinweis: Bitte mindestens zwei Wochen vor Veranstaltungsbeginn einreichen.</p>
</form>
</main>

<script>
const ENDPOINT = "https://script.google.com/macros/s/AKfycbyEmONYSM9-KMUMyFz_8YOBpVKB0y_PFNrYJhiOsOmy-PLqiw6uV1ESUWzp2FqCdUu-/exec"; // z.B. https://script.google.com/macros/s/…/exec

function validateTimes(from, to){
if(!from || !to) return true;
return from < to;
}

document.getElementById('bookingForm').addEventListener('submit', async (e) => {
e.preventDefault();
const f = e.currentTarget;
const fd = new FormData(f);

// Honeypot
if (fd.get('website')) return;

// Basic check
if (!validateTimes(fd.get('time_from'), fd.get('time_to'))){
alert('Zeitspanne prüfen: "von" muss vor "bis" liegen.');
return;
}

try {
const res = await fetch(ENDPOINT, { method: 'POST', body: fd, mode: 'cors' });
if (!res.ok) throw new Error('HTTP '+res.status);
document.getElementById('ok').style.display = 'block';
document.getElementById('err').style.display = 'none';
f.reset();
} catch (err) {
document.getElementById('ok').style.display = 'none';
document.getElementById('err').style.display = 'block';
}
});
</script>
</body>
</html>
